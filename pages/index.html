<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Mikoloism Portfolio</title>
    <script>
      const $style = /*css*/ `
        .loading-box {
          position: fixed;
          top: 0;
          bottom: 0;
          right: 0;
          left: 0;
          display: flex;
          flex-direction: column;
          flex-wrap: wrap;
          width: 100vw;
          min-height: 100vh;
           align-items: center;
          justify-content: center;
          align-content: center;
          background-color: rgba(196, 219, 250, 0.7);
          z-index: 999;
        }

        .loading {
          display: flex;
          flex-direction: row;
          flex-wrap: wrap;
          align-items: center;
          justify-content: space-around;
          align-content: center;
          width: 200px;
          height: 45px;
          background-color: #444;
          padding: 0 4px;
        }
        .loading, .loading__block {
          border-radius: 6px;
          transition: 0.2s 0s ease all;
        }
        .loading__block {
          width: 25px;
          height: 25px;
          background-color: #f9fcff;
        }
        .loading__block--active {
          background-color: #5c9dc0;
        }`;

        const $template = /*html*/ `
        <style type="text/css">${$style}</style>
        <div class="loading-box">
          <h3 style="align-self: flex-start; margin: 9px 4px; padding: 0;">Coming Soon...</h3>
          <div class="loading">
            <span class="loading__block" style="display:none;"></span>
            <span class="loading__block"></span>
            <span class="loading__block"></span>
            <span class="loading__block"></span>
            <span class="loading__block"></span>
            <span class="loading__block"></span>
            <span class="loading__block"></span>
            <span class="loading__block" style="display:none;"></span>
          </div>
        </div>`;

        class YLoading extends HTMLElement {
          constructor() {
            super();
            this.$template = document.createElement("template");
            this.$template.innerHTML = $template;
            this.attachShadow({ mode: "open" });
          }

          connectedCallback() {
            this.shadowRoot.appendChild(this.$template.content.cloneNode(true));
            this.$this = this.shadowRoot.querySelector(".loading");
            this.$children = this.shadowRoot.querySelectorAll(".loading__block");
            this.$mode = this.dataset.mode;
            this.$speed = parseInt(this.dataset.speed || `150`);
            this.render();
          }

          mode_reverse() {
            let index = 0;
            let isReverse = false;
            window.setInterval(() => {
              this.$children[index].classList.toggle("loading__block--active");
              if (isReverse) {
                if (index - 1 <= 0) isReverse = false;
                index--;
              } else {
                index++;
                if (index + 1 >= this.$children.length) isReverse = true;
              }
            }, this.$speed);
          }

          mode_alternate() {
            let index = 0;
            window.setInterval(() => {
              this.$children[index].classList.toggle("loading__block--active");
              index++;
              if (index + 1 >= this.$children.length) index = 0;
            }, this.$speed);
          }

          render() {
            switch (this.$mode) {
              case "reverse":
                this.mode_reverse();
                break;
              case "alternate":
              default:
                this.mode_alternate();
                break;
            }
          }
        }

        customElements.define("yek-loading", YLoading);      
    </script>
  </head>
  <body>
    <yek-loading />
  </body>
</html>
